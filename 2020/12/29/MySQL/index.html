<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/W_apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32x32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16x16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="code-Rb70WNAXWJ">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.jonyonwzj.top","root":"/","images":"/images","scheme":"Pisces","version":"8.1.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="MySQLjavaEE 企业级开发 Web 前端：页面渲染，展示数据 后台：连接点  连接数据库JDBC 连接前端(控制，控制视图跳转，给前端传数据)  数据库：存储数据(TXT,Excel,Word)">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL">
<meta property="og:url" content="http://www.jonyonwzj.top/2020/12/29/MySQL/index.html">
<meta property="og:site_name" content="Joynoy&#39;s Blog">
<meta property="og:description" content="MySQLjavaEE 企业级开发 Web 前端：页面渲染，展示数据 后台：连接点  连接数据库JDBC 连接前端(控制，控制视图跳转，给前端传数据)  数据库：存储数据(TXT,Excel,Word)">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201227135821340.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201228152233605.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201228134034520.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201228134325920.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201229115051120.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201229115228329.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201229115452418.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201229115943793.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201229120104184.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201229120155673.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201229153000652.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201229153025902.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201229153051165.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201229153410785.png">
<meta property="og:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201229153751973.png">
<meta property="article:published_time" content="2020-12-29T08:48:19.000Z">
<meta property="article:modified_time" content="2021-04-02T11:47:30.291Z">
<meta property="article:author" content="Zhengjie Wu">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.jonyonwzj.top/2020/12/29/MySQL/image-20201227135821340.png">


<link rel="canonical" href="http://www.jonyonwzj.top/2020/12/29/MySQL/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>
<title>MySQL | Joynoy's Blog</title>
  

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e16a6db01cc305488bc4ebdb147b6f6d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Joynoy's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Joynoy's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Learn something</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
        <li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a></li>
        <li class="menu-item menu-item-sitemap"><a href="/baidusitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li>
        <li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>Commonweal 404</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <section class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL"><span class="nav-text">MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-text">什么是数据库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%98%BF%E9%87%8C%E4%BA%91%E8%A7%84%E8%8C%83"><span class="nav-text">阿里云规范</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E7%B1%BB"><span class="nav-text">数据库分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-text">新建数据库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-text">命令行操作数据库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-text">操作数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93-1"><span class="nav-text">操作数据库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%88%97%E7%B1%BB%E5%9E%8B"><span class="nav-text">数据库的列类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="nav-text">数据库的字段属性（重点）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="nav-text">创建数据库表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%AF%AD%E5%8F%A5"><span class="nav-text">查看创建数据库的语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="nav-text">数据表的类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="nav-text">修改和删除表</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mysql%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86"><span class="nav-text">Mysql数据管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%96%E9%94%AE%EF%BC%88%E4%BA%86%E8%A7%A3%E5%8D%B3%E5%8F%AF%EF%BC%89"><span class="nav-text">外键（了解即可）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DML%E8%AF%AD%E8%A8%80%EF%BC%88%E5%85%A8%E9%83%A8%E8%AE%B0%E4%BD%8F%EF%BC%89"><span class="nav-text">DML语言（全部记住）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0-insert"><span class="nav-text">添加(insert)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-update"><span class="nav-text">修改(update)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4-delete"><span class="nav-text">删除(delete)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DELETE%E5%88%A0%E9%99%A4%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">DELETE删除的问题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SELECT%E5%AE%8C%E6%95%B4%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="nav-text">SELECT完整的语法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DQL%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE-%E9%87%8D%E7%82%B9"><span class="nav-text">DQL查询数据(重点)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#DQL"><span class="nav-text">DQL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%87%E5%AE%9A%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5"><span class="nav-text">指定查询字段</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#distinct"><span class="nav-text">distinct</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%88%97-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">数据库的列(表达式)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#where%E6%9D%A1%E4%BB%B6%E5%AD%90%E5%8F%A5"><span class="nav-text">where条件子句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2-%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">模糊查询:比较运算符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-text">联表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JOIN%E5%AF%B9%E6%AF%94"><span class="nav-text">JOIN对比</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#on%E5%92%8Cwhere"><span class="nav-text">on和where</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="nav-text">自连接</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E9%A1%B5%E5%92%8C%E6%8E%92%E5%BA%8F"><span class="nav-text">分页和排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-text">子查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E5%92%8C%E8%BF%87%E6%BB%A4%EF%BC%88group-by%E2%80%A6having%EF%BC%89"><span class="nav-text">分组和过滤（group by…having）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL%E5%87%BD%E6%95%B0"><span class="nav-text">MySQL函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="nav-text">常用函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-text">聚合函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A7%E5%88%AB%E7%9A%84MD5%E5%8A%A0%E5%AF%86"><span class="nav-text">数据库级别的MD5加密</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1"><span class="nav-text">事务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1"><span class="nav-text">什么是事务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E5%8E%9F%E5%88%99-ACID%E5%8E%9F%E5%88%99"><span class="nav-text">事务原则:ACID原则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9A%94%E7%A6%BB%E6%80%A7%EF%BC%88Isolation%EF%BC%89%E6%89%80%E5%AF%BC%E8%87%B4%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98"><span class="nav-text">隔离性（Isolation）所导致的一些问题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-text">索引</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-text">索引的分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E7%B4%A2%E5%BC%95"><span class="nav-text">测试索引</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E5%8E%9F%E5%88%99"><span class="nav-text">索引原则</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E5%92%8C%E5%A4%87%E4%BB%BD"><span class="nav-text">权限管理和备份</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="nav-text">用户管理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD"><span class="nav-text">MySQL数据库备份</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%84%E8%8C%83%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="nav-text">规范数据库设计</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E8%AE%BE%E8%AE%A1"><span class="nav-text">为什么需要设计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F"><span class="nav-text">三大范式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JDBC"><span class="nav-text">JDBC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A9%B1%E5%8A%A8"><span class="nav-text">数据库驱动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JDBC-1"><span class="nav-text">JDBC</span></a></li></ol></li></ol></div>
        </section>
        <!--/noindex-->

        <section class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Zhengjie Wu"
      src="/images/Jonyon's.png">
  <p class="site-author-name" itemprop="name">Zhengjie Wu</p>
  <div class="site-description" itemprop="description">Trust The Process</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/AdgerJay518" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;AdgerJay518" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="rss → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>rss</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/username" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;username" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat_channel.jpg" title="WeChat → &#x2F;images&#x2F;wechat_channel.jpg"><i class="fab fa-weixin fa-fw"></i>WeChat</a>
      </span>
  </div>



        </section>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.jonyonwzj.top/2020/12/29/MySQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Jonyon's.png">
      <meta itemprop="name" content="Zhengjie Wu">
      <meta itemprop="description" content="Trust The Process">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joynoy's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-12-29 16:48:19" itemprop="dateCreated datePublished" datetime="2020-12-29T16:48:19+08:00">2020-12-29</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-04-02 19:47:30" itemprop="dateModified" datetime="2021-04-02T19:47:30+08:00">2021-04-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p>javaEE 企业级开发 Web</p>
<p>前端：页面渲染，展示数据</p>
<p>后台：连接点</p>
<ul>
<li>连接数据库JDBC</li>
<li>连接前端(控制，控制视图跳转，给前端传数据)</li>
</ul>
<p>数据库：存储数据(TXT,Excel,Word)</p>
<a id="more"></a>



<p>5.7版本最稳定</p>
<h2 id="什么是数据库"><a href="#什么是数据库" class="headerlink" title="什么是数据库"></a>什么是数据库</h2><p>数据库(DB database)</p>
<p>概念：数据仓库，安装在操作系统（windows，linux）上，SQL可以存储大量的数据 500万</p>
<p>作用：存储数据，管理数据</p>
<h1 id="阿里云规范"><a href="#阿里云规范" class="headerlink" title="阿里云规范"></a>阿里云规范</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--每一个表都必须存在以下五个字段  做项目用的 表示一个记录存在的意义</span></span><br><span class="line">id           <span class="comment">--主键</span></span><br><span class="line">version      <span class="comment">--乐观锁</span></span><br><span class="line">is_delete    <span class="comment">--伪删除</span></span><br><span class="line">gmt_create   <span class="comment">--创建时间</span></span><br><span class="line">gmt_update   <span class="comment">--修改时间</span></span><br></pre></td></tr></table></figure>





<h2 id="数据库分类"><a href="#数据库分类" class="headerlink" title="数据库分类"></a>数据库分类</h2><p><strong>关系型数据库(sql)</strong>:</p>
<ul>
<li>MySQL  Oracle  SqlServer DB2 SQLlite</li>
<li>通过表和表之间，行和列之间的关系进行数据的存储   </li>
</ul>
<p><strong>非关系型数据库(nosql—not only sql)</strong>:</p>
<ul>
<li>Redis   MongoDB</li>
<li>非关系型数据库，对象存储，通过对象的自身属性来决定</li>
</ul>
<p><code>DBMS(数据库管理系统)</code></p>
<ul>
<li>数据库的管理软件，科学有效的管理我们的数据。维护和获取数据;</li>
<li>MySQL本质是一个数据库管理系统</li>
</ul>
<h2 id="新建数据库"><a href="#新建数据库" class="headerlink" title="新建数据库"></a>新建数据库</h2><p><img src="/2020/12/29/MySQL/image-20201227135821340.png" alt="image-20201227135821340"></p>
<h2 id="命令行操作数据库"><a href="#命令行操作数据库" class="headerlink" title="命令行操作数据库"></a>命令行操作数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -proot <span class="comment">--连接数据库</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> mysql.user <span class="keyword">set</span> authentication_string=<span class="keyword">password</span>(<span class="string">&#x27;root&#x27;</span>) <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">&#x27;root&#x27;</span> <span class="keyword">and</span> Host=<span class="string">&#x27;localhost&#x27;</span>; <span class="comment">--修改用户密码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span> <span class="comment">--刷新权限</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>; <span class="comment">--查看所有数据库</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> school;    <span class="comment">--切换数据库</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;   <span class="comment">--查看数据库中所有的表</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">describe</span> student;   <span class="comment">--显示数据库中所有的表信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> www;  <span class="comment">--创建一个数据库</span></span><br></pre></td></tr></table></figure>



<p>数据库xxxx语言  CRUD增删改查</p>
<p>DDL     Definition  定义</p>
<p>DML     Manipulation 操作 </p>
<p>DQL      Query 查询</p>
<p>DCL       Control 控制</p>
<h1 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h1><p>操作数据库&gt;操作数据库中的表&gt;操作数据库中表的数据</p>
<p>mysql关键字不区分大小写</p>
<h2 id="操作数据库-1"><a href="#操作数据库-1" class="headerlink" title="操作数据库"></a>操作数据库</h2><p><strong>创建数据库</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> [<span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span>] school;</span><br></pre></td></tr></table></figure>



<p><strong>删除数据库</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> [<span class="keyword">if</span> <span class="keyword">exists</span>] school;</span><br></pre></td></tr></table></figure>



<p><strong>使用数据库</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="string">&#x27;school&#x27;</span>;   <span class="comment">--如果你的表名或字段名是一个特殊字符，就需要带&#x27; &#x27;</span></span><br></pre></td></tr></table></figure>





<h2 id="数据库的列类型"><a href="#数据库的列类型" class="headerlink" title="数据库的列类型"></a>数据库的列类型</h2><p><strong>数值</strong></p>
<ul>
<li>tinyint  十分小的数据，一个字节</li>
<li>smallint 较小的数据 ， 两个字节</li>
<li>mediumint 中等大小的数据，三个字节</li>
<li>int  标准的整数， 四个字节   “常用的”      int</li>
<li>bigint 较大的数据，八个字节                    long</li>
<li>float 浮点数 ，四个字节                             float</li>
<li>double  浮点数， 八个字节（精度问题）double</li>
<li>decimal 字符串形式的浮点数  金融计算的时候，一般使用decimal</li>
</ul>
<p><strong>字符串</strong></p>
<ul>
<li>char  固定大小的字符串 0-255</li>
<li>varchar   可变字符串  0-65535  常用的    String</li>
<li>tinytest   微型文本   2^8-1    （存一般的博客文章）</li>
<li>text          文本串      2^16-1  （保存特别大的文本） 较常用</li>
</ul>
<p><strong>时间日期</strong></p>
<p>java.util.date</p>
<ul>
<li>date  YYYY-MM-DD 日期格式</li>
<li>time  HH-mm-ss  时间格式</li>
<li>datetime  YYYY-MM-DD HH-mm-ss   最常用的时间格式</li>
<li>timestrap 时间戳  197.1.1到现在的毫秒数  较为常用</li>
<li>year 年份表示</li>
</ul>
<p><strong>null</strong></p>
<ul>
<li>没有值，未知</li>
<li>注意，不要使用null进行运算</li>
</ul>
<h2 id="数据库的字段属性（重点）"><a href="#数据库的字段属性（重点）" class="headerlink" title="数据库的字段属性（重点）"></a>数据库的字段属性（重点）</h2><p>Unsigned（无符号）：</p>
<ul>
<li>无符号整数</li>
<li>不能声明为负数</li>
</ul>
<p>zerofill：</p>
<ul>
<li>0填充的</li>
<li>不足的位数用0填充   例如：int(3)   ,  数据为5—-填充为005</li>
</ul>
<p>自增：</p>
<ul>
<li>自动在上一条记录的基础上+1</li>
<li>通常用来设计唯一的主键 index，必须是整数类型</li>
<li>可以自定义设计主键自增的起始值和步长</li>
</ul>
<p>非空</p>
<ul>
<li>假设设置为not null，如果不给他赋值，就会报错</li>
<li>null 如果不填写值，默认为null</li>
</ul>
<p>默认</p>
<ul>
<li>设置默认的值</li>
<li>sex  默认值为男，如果不指定该列的值，则会有默认的值</li>
</ul>
<h2 id="创建数据库表"><a href="#创建数据库表" class="headerlink" title="创建数据库表"></a>创建数据库表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">EXISTS</span> student(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="literal">null</span> auto_increment <span class="keyword">comment</span> <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;匿名&#x27;</span> <span class="keyword">comment</span> <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">pwd <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">&#x27;123456&#x27;</span> <span class="keyword">comment</span> <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">sex <span class="built_in">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">&#x27;女&#x27;</span> <span class="keyword">comment</span> <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">birthday datetime <span class="keyword">default</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">&#x27;出生日期&#x27;</span>,</span><br><span class="line">address <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">default</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">&#x27;家庭住址&#x27;</span>,</span><br><span class="line">email <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">default</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>)</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">default</span> <span class="keyword">CHARSET</span>=utf8</span><br></pre></td></tr></table></figure>





<h2 id="查看创建数据库的语句"><a href="#查看创建数据库的语句" class="headerlink" title="查看创建数据库的语句"></a>查看创建数据库的语句</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">database</span> school  <span class="comment">--查看创建数据库的语句</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> student <span class="comment">--查看student数据表的定义语句</span></span><br><span class="line"><span class="keyword">desc</span> student <span class="comment">--显示表的结构</span></span><br></pre></td></tr></table></figure>





<h2 id="数据表的类型"><a href="#数据表的类型" class="headerlink" title="数据表的类型"></a>数据表的类型</h2><p>关于数据库引擎</p>
<p>innodb  默认使用</p>
<p>myisam早些年使用的</p>
<table>
<thead>
<tr>
<th></th>
<th>MYISAM</th>
<th>INNODB</th>
</tr>
</thead>
<tbody><tr>
<td>事务支持</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>数据行锁定</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>外键约束</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>全文索引</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>表空间大小</td>
<td>较小</td>
<td>较大，约为myisam的两倍</td>
</tr>
</tbody></table>
<p>常规使用操作:</p>
<ul>
<li>MYISAM：节约空间，速度较快</li>
<li>INNODB：安全性高，支持事务的处理，多表多用户操作</li>
</ul>
<p><code>在物理空间存在的位置</code></p>
<p>所有的数据库文件都存在data目录下，一个文件夹对应一个数据库</p>
<p>本质还是文件存储</p>
<p>MySQL引擎在物理文件上的区别</p>
<ul>
<li>innoDB在数据库表中只有一个*.frm文件，以及上级目录下的lbdata1文件</li>
<li>MYISAM对应文件<ul>
<li>*.frm –表结构的定义文件</li>
<li>*.MYD –数据文件（data）</li>
<li>*.MYI –索引文件（index）</li>
</ul>
</li>
</ul>
<p><code>设置数据库表的字符集编码</code></p>
<p>CHARSET=utf8</p>
<p>不设置的话，会是mysql默认的字符集编码（不支持中文）</p>
<p>MySQL默认编码是Latin1，不支持中文</p>
<p>在my.ini中配置默认的编码：character-set-server=utf8  （不建议，跨平台无法使用）</p>
<h2 id="修改和删除表"><a href="#修改和删除表" class="headerlink" title="修改和删除表"></a>修改和删除表</h2><p><strong>修改</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 旧表名 <span class="keyword">rename</span> <span class="keyword">as</span> 新表名  <span class="comment">--修改表名</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> age <span class="built_in">int</span>(<span class="number">11</span>)  <span class="comment">--增加表的字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">modify</span> age <span class="built_in">varchar</span>(<span class="number">11</span>) <span class="comment">--修改表的字段 修改约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">change</span> 旧字段名 新字段名 <span class="built_in">int</span>(<span class="number">1</span>) <span class="comment">--字段重命名</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> 字段 <span class="comment">--删除表的字段</span></span><br></pre></td></tr></table></figure>



<p><strong>删除</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> 表名 <span class="comment">--如果表存在再删除</span></span><br></pre></td></tr></table></figure>



<h1 id="Mysql数据管理"><a href="#Mysql数据管理" class="headerlink" title="Mysql数据管理"></a>Mysql数据管理</h1><h2 id="外键（了解即可）"><a href="#外键（了解即可）" class="headerlink" title="外键（了解即可）"></a>外键（了解即可）</h2><p>方式一：在创建表的时候增加约束（麻烦，比较复杂）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">key FK_gradeid(gradeid),</span><br><span class="line">constraint FK_gradeid foreign key (gradeid) references grade (gradeid)</span><br></pre></td></tr></table></figure>

<p>删除有外键关系的表时，必须要先删除引用别人的表（从表），再删除被引用的表（主表）</p>
<p>方式二：创建表成功后，添加外键约束</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表 <span class="keyword">add</span> <span class="keyword">constraint</span> 约束名 <span class="keyword">foreign</span> <span class="keyword">key</span>(作为外键的列) <span class="keyword">references</span> 哪个表（哪个字段）</span><br></pre></td></tr></table></figure>



<p>以上操作都是物理外键，数据库级别的外键，我们不建议使用(避免数据库过多造成困扰)</p>
<p><strong>最佳实践</strong></p>
<ul>
<li>数据库就是单纯的表，只用来存数据，只有行（数据）和列（字段）</li>
<li>我们想使用多张表的数据，想使用外键（程序去实现）</li>
</ul>
<h2 id="DML语言（全部记住）"><a href="#DML语言（全部记住）" class="headerlink" title="DML语言（全部记住）"></a>DML语言（全部记住）</h2><p><strong>数据库意义</strong>：数据存储、数据管理</p>
<p>DML语言：数据操作语言</p>
<ul>
<li>insert</li>
<li>update</li>
<li>delete</li>
</ul>
<h2 id="添加-insert"><a href="#添加-insert" class="headerlink" title="添加(insert)"></a>添加(insert)</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--insert into 表名（字段名1，字段名2，字段名3） values（&#x27;值1&#x27;，&#x27;值2&#x27;,&#x27;值3&#x27;）</span></span><br><span class="line"><span class="comment">--如果不写表的字段他就会一一匹配</span></span><br><span class="line"><span class="comment">--一般写插入语句，我们一定要数据和字段一一对应</span></span><br><span class="line"><span class="comment">--插入多个字段</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> grade (gradename)</span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;大一&#x27;</span>)，</span><br><span class="line">(<span class="string">&#x27;大二&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>注意事项</p>
<ul>
<li>字段和字段之间使用英文逗号隔开</li>
<li>字段是可以省略的，但后面的值必须一一对应，不能少</li>
<li>可以同时插入多条数据，values后面的值使用逗号隔开即可 <code>values(),(),()....</code></li>
</ul>
<h2 id="修改-update"><a href="#修改-update" class="headerlink" title="修改(update)"></a>修改(update)</h2><p><code>update 修改谁 (条件) set 原来的值=新值</code> </p>
<p>不指定条件的情况下，会改动所有的表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--修改学员名字，带了条件</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">&#x27;zhangsan&#x27;</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span>;</span><br><span class="line"><span class="comment">--不指定条件的情况下会改动所有的表</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="comment">--修改多个属性，逗号隔开</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">&#x27;zhangsan&#x27;</span>，emial=<span class="string">&#x27;994057864&#x27;</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span>;</span><br><span class="line"><span class="comment">--update 表名 set 字段名=&#x27;value&#x27; where 条件=&#x27;value&#x27;;</span></span><br></pre></td></tr></table></figure>

<p>条件:where子句 运算符 id等于、大于、小于某个值 在某个区间内修改</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>含义</th>
<th>范围</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>范围</td>
<td>5=6</td>
<td>false</td>
</tr>
<tr>
<td>&lt;&gt;或！=</td>
<td>不等于</td>
<td>5&lt;&gt;6</td>
<td>true</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于</td>
<td></td>
<td></td>
</tr>
<tr>
<td>between…and…</td>
<td>闭合区间[2,5],在某个范围内</td>
<td>[2,5]</td>
<td></td>
</tr>
<tr>
<td>and</td>
<td>和</td>
<td>5&gt;1 and 1&gt;2</td>
<td>false</td>
</tr>
<tr>
<td>or</td>
<td>或</td>
<td>5&gt;1or 1&gt;2</td>
<td>true</td>
</tr>
</tbody></table>
<h2 id="删除-delete"><a href="#删除-delete" class="headerlink" title="删除(delete)"></a>删除(delete)</h2><p>语法:<code>delete from 表名[where 条件]</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--删除数据，避免这样写，会全删</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除指定数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span>；</span><br></pre></td></tr></table></figure>



<p><code>truncate命令</code></p>
<p>作用：完全清空一个数据库表，表的结果和索引约束不会变</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--清空student表</span></span><br><span class="line"><span class="keyword">truncate</span> student</span><br></pre></td></tr></table></figure>



<p><code>delete 和 truncate区别</code></p>
<ul>
<li>相同点:都会删除数据，都不会删除表结构</li>
<li>不同:<ul>
<li>truncate 重新设置 自增列 计数器会归零</li>
<li>truncate 不会影响事务</li>
</ul>
</li>
</ul>
<h2 id="DELETE删除的问题"><a href="#DELETE删除的问题" class="headerlink" title="DELETE删除的问题"></a>DELETE删除的问题</h2><p>使用delete删除后，重启数据库，现象</p>
<ul>
<li>INNODB 自增列会从1开始(存在内存当中，断电即失)</li>
<li>MYISAM 继续从上一个自增量开始(存在文件中，不会丢失)</li>
</ul>
<h1 id="SELECT完整的语法"><a href="#SELECT完整的语法" class="headerlink" title="SELECT完整的语法"></a>SELECT完整的语法</h1><p><img src="/2020/12/29/MySQL/image-20201228152233605.png" alt="image-20201228152233605"></p>
<h1 id="DQL查询数据-重点"><a href="#DQL查询数据-重点" class="headerlink" title="DQL查询数据(重点)"></a>DQL查询数据(重点)</h1><h2 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h2><p><strong>Date Query Language:数据查询语言</strong></p>
<ul>
<li>所有的查询操作都用它 select</li>
<li>简单的查询，复杂的查询它都能做</li>
<li>数据库中最核心的语言</li>
<li>使用频率最高的语句</li>
</ul>
<h2 id="指定查询字段"><a href="#指定查询字段" class="headerlink" title="指定查询字段"></a>指定查询字段</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询全部的学生</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询指定字段</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentname <span class="keyword">from</span> student</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 别名，给结果取一个名字，也可以给表起别名</span></span><br><span class="line"><span class="keyword">select</span> studentno <span class="keyword">as</span> 学号,studentname <span class="keyword">as</span> 学生姓名 <span class="keyword">from</span> student</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 函数 Concat(a,b)拼接字符串</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">CONCAT</span>(<span class="string">&#x27;姓名:&#x27;</span>,studentname) <span class="keyword">as</span> 新名字 <span class="keyword">from</span> student</span><br></pre></td></tr></table></figure>

<p>语法:<code>select 字段...from 表</code></p>
<h3 id="distinct"><a href="#distinct" class="headerlink" title="distinct"></a>distinct</h3><p>作用：去除select查询出来的结果中重复的数据，重复的数据只显示一条</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询有多少同学参加了考试</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">result</span> <span class="comment">-- 查询全都的考试成绩</span></span><br><span class="line"><span class="comment">-- 查询有哪些同学参加了考试</span></span><br><span class="line"><span class="keyword">select</span> studentno <span class="keyword">from</span> <span class="keyword">result</span></span><br><span class="line"><span class="comment">-- 发现重复数据，去重复</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> studentno <span class="keyword">from</span> <span class="keyword">result</span></span><br></pre></td></tr></table></figure>



<h3 id="数据库的列-表达式"><a href="#数据库的列-表达式" class="headerlink" title="数据库的列(表达式)"></a>数据库的列(表达式)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">version</span>()   <span class="comment">-- 查询系统版本(函数)</span></span><br><span class="line">(elect  <span class="number">100</span>*<span class="number">5</span><span class="number">-12</span> <span class="keyword">as</span> 计算结果  <span class="comment">-- 计算(表达式)</span></span><br><span class="line"><span class="keyword">select</span> @@auto_increment_increment <span class="comment">-- 查询自增的步长(变量)</span></span><br><span class="line"><span class="comment">-- 学院考试成绩+1查看</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentresult <span class="keyword">as</span> <span class="string">&#x27;提分前&#x27;</span><span class="keyword">from</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentresult+<span class="number">1</span> <span class="keyword">as</span> <span class="string">&#x27;提分后&#x27;</span> <span class="keyword">from</span> <span class="keyword">result</span></span><br></pre></td></tr></table></figure>

<p>数据库中的表达式:文本值、列、null、函数、计算表达式、系统变量</p>
<p>select 表达式 from 表</p>
<h2 id="where条件子句"><a href="#where条件子句" class="headerlink" title="where条件子句"></a>where条件子句</h2><p>作用:检索数据中符合条件的值</p>
<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><table>
<thead>
<tr>
<th>运算符</th>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>and &amp;&amp;</td>
<td></td>
<td>逻辑与</td>
</tr>
<tr>
<td>or ||</td>
<td></td>
<td>逻辑或</td>
</tr>
<tr>
<td>not ！</td>
<td></td>
<td>逻辑非</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询考试成绩在95-100之间</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentresult  </span><br><span class="line"><span class="keyword">from</span> <span class="keyword">result</span> </span><br><span class="line"><span class="keyword">where</span> studentresult&gt;=<span class="number">95</span> <span class="keyword">and</span> studentresult&lt;=<span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 模糊查询(区间)</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentresult  </span><br><span class="line"><span class="keyword">from</span> <span class="keyword">result</span> </span><br><span class="line"><span class="keyword">where</span> studentresult <span class="keyword">between</span> <span class="number">95</span> <span class="keyword">and</span> <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--!= 和 not</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentresult  </span><br><span class="line"><span class="keyword">from</span> <span class="keyword">result</span> </span><br><span class="line"><span class="keyword">where</span> studentresult!=<span class="number">85</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> studentno,studentresult  </span><br><span class="line"><span class="keyword">from</span> <span class="keyword">result</span> </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">not</span> studentresult=<span class="number">85</span></span><br></pre></td></tr></table></figure>



<h3 id="模糊查询-比较运算符"><a href="#模糊查询-比较运算符" class="headerlink" title="模糊查询:比较运算符"></a>模糊查询:比较运算符</h3><table>
<thead>
<tr>
<th>运算符</th>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>is null</td>
<td>a is null</td>
<td>如果操作符null，则结果为true</td>
</tr>
<tr>
<td>is not null</td>
<td>a is not null</td>
<td>如果操作符为 not null ，则结果为true</td>
</tr>
<tr>
<td>between</td>
<td>a between a and b</td>
<td>若a在b和c之间，则结果为true</td>
</tr>
<tr>
<td><strong>like</strong></td>
<td>a like b</td>
<td>sql匹配，如果a匹配b，则结果true</td>
</tr>
<tr>
<td>in</td>
<td>a in(a1,a2,a3…)</td>
<td>假设a在a1或者a2….其中的某一个值，结果为true</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- like</span></span><br><span class="line"><span class="comment">-- 查询姓张的同学</span></span><br><span class="line"><span class="comment">-- like结合 %(代表0到任意个字符) _(代表一个字符)</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentname</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> studentname <span class="keyword">like</span> <span class="string">&#x27;张%&#x27;</span></span><br><span class="line"><span class="comment">-- 查询姓张的同学，名字后面只有一个字</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentname</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> studentname <span class="keyword">like</span> <span class="string">&#x27;张_&#x27;</span></span><br><span class="line"><span class="comment">-- 查询姓张的同学，名字后面只有两个字</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentname</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> studentname <span class="keyword">like</span> <span class="string">&#x27;张__&#x27;</span></span><br><span class="line"><span class="comment">-- 查询名字中有嘉字的同学</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentname</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> studentname <span class="keyword">like</span> <span class="string">&#x27;%嘉%&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- in(具体的一个或多个值)</span></span><br><span class="line"><span class="comment">-- 查询1001、1002号学员</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentname</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> studentno <span class="keyword">in</span> (<span class="number">1000</span>,<span class="number">1001</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- null 和 not null</span></span><br><span class="line"><span class="keyword">select</span> studentno,studentname</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> studentno <span class="keyword">is</span> <span class="literal">null</span> <span class="keyword">or</span> studentno=<span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> studentno,studentname</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> studentno <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br></pre></td></tr></table></figure>



<h2 id="联表查询"><a href="#联表查询" class="headerlink" title="联表查询"></a>联表查询</h2><h3 id="JOIN对比"><a href="#JOIN对比" class="headerlink" title="JOIN对比"></a>JOIN对比</h3><p><img src="/2020/12/29/MySQL/image-20201228134034520.png" alt="image-20201228134034520"></p>
<p><img src="/2020/12/29/MySQL/image-20201228134325920.png" alt="image-20201228134325920"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 联表查询join</span></span><br><span class="line"><span class="comment">-- 查询参加了考试的同学(学号、姓名、科目编号、分数)</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">from</span> <span class="keyword">result</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 思路</span></span><br><span class="line"><span class="comment"> 1.分析需求，分析查询的字段来自哪些表(连接查询)</span></span><br><span class="line"><span class="comment"> 2.确定使用哪种连接查询--7种</span></span><br><span class="line"><span class="comment"> 确定交叉点(这两个表中哪个数据是相同的)</span></span><br><span class="line"><span class="comment"> 判断的条件：学生表种的studentno=成绩表中的studentno</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- inner join</span></span><br><span class="line"><span class="keyword">select</span> s.studentno,studentname,subjectno,studentresult</span><br><span class="line"><span class="keyword">from</span> student <span class="keyword">as</span> s</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> <span class="keyword">result</span> <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">where</span> s.studentno=r.studentno</span><br><span class="line"><span class="comment">-- left join</span></span><br><span class="line"><span class="keyword">select</span> s.studentno,studentname,subjectno,studentresult</span><br><span class="line"><span class="keyword">from</span> student <span class="keyword">as</span> s</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> <span class="keyword">result</span> <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">on</span> s.studentno=r.studentno</span><br><span class="line"><span class="comment">-- right join</span></span><br><span class="line"><span class="keyword">select</span> s.studentno,studentname,subjectno,studentresult</span><br><span class="line"><span class="keyword">from</span> student <span class="keyword">as</span> s</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> <span class="keyword">result</span> <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">on</span> s.studentno=r.studentno</span><br><span class="line"><span class="comment">-- 查询缺考的同学</span></span><br><span class="line"><span class="keyword">select</span> s.studentno,studentname,subjectno,studentresult</span><br><span class="line"><span class="keyword">from</span> student <span class="keyword">as</span> s</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> <span class="keyword">result</span> <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">on</span> s.studentno=r.studentno</span><br><span class="line"><span class="keyword">where</span> studentresult <span class="keyword">is</span> <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询参加了考试的同学信息(学号、姓名、科目名、分数)</span></span><br><span class="line"><span class="keyword">select</span> s.studentno,studentname,subjectname,studentresult</span><br><span class="line"><span class="keyword">from</span> student s</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">on</span> r.studentno=s.studentno</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> subject sub</span><br><span class="line"><span class="keyword">on</span> r.subjectno=sub.subjectno</span><br><span class="line"><span class="comment">-- 我要查询哪些数据</span></span><br><span class="line"><span class="comment">-- 从哪几个表中查  from表 xxx join 连接的表 on 交叉条件</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>操作</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>inner join</td>
<td>如果表中至少有一个匹配，就返回行；是并集不是交集，只要有一张表有数据就可以拿到</td>
</tr>
<tr>
<td>left join</td>
<td>会从左表中返回所有的值，即使右表中没有匹配，</td>
</tr>
<tr>
<td>right join</td>
<td>会从右表中返回所有的值，即使左表中没有匹配，</td>
</tr>
</tbody></table>
<p>只要有并集就可以合并两张表所有的数据</p>
<h3 id="on和where"><a href="#on和where" class="headerlink" title="on和where"></a>on和where</h3><p>join on连接查询</p>
<p>where 等值查询</p>
<p>on是先筛选后关联，where是先关联后筛选</p>
<p>on条件是生成临时表时使用的条件，它不管on中的条件是否为真，都会返回左表中的记录</p>
<p>on确定连接 where确定筛选</p>
<p>on是建立连接 where是对结果筛选</p>
<h3 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h3><p>自己的表和自己的表连接</p>
<p><strong>核心：一张表拆为两张一样的表即可</strong></p>
<p>父类</p>
<table>
<thead>
<tr>
<th>categoryid</th>
<th>categoryname</th>
</tr>
</thead>
<tbody><tr>
<td>2</td>
<td>信息技术</td>
</tr>
<tr>
<td>3</td>
<td>软件开发</td>
</tr>
<tr>
<td>5</td>
<td>美术设计</td>
</tr>
</tbody></table>
<p>子类</p>
<table>
<thead>
<tr>
<th>pid</th>
<th>categoryid</th>
<th>categoryname</th>
</tr>
</thead>
<tbody><tr>
<td>3</td>
<td>4</td>
<td>数据库</td>
</tr>
<tr>
<td>2</td>
<td>8</td>
<td>办公信息</td>
</tr>
<tr>
<td>3</td>
<td>6</td>
<td>web开发</td>
</tr>
<tr>
<td>5</td>
<td>7</td>
<td>ps技术</td>
</tr>
</tbody></table>
<p>操作：查询父类对应的子类关系</p>
<table>
<thead>
<tr>
<th>父类</th>
<th>子类</th>
</tr>
</thead>
<tbody><tr>
<td>信息技术</td>
<td>办公信息</td>
</tr>
<tr>
<td>软件开发</td>
<td>数据库</td>
</tr>
<tr>
<td>软件开发</td>
<td>web开发</td>
</tr>
<tr>
<td>美术设计</td>
<td>ps技术</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询父子信息 把一张表看成两张一模一样表</span></span><br><span class="line"><span class="keyword">select</span> a.categoryname <span class="keyword">as</span> <span class="string">&#x27;父&#x27;</span> , b.categoryname <span class="keyword">as</span> <span class="string">&#x27;子&#x27;</span></span><br><span class="line"><span class="keyword">from</span> <span class="keyword">category</span> <span class="keyword">as</span> a,<span class="keyword">category</span> <span class="keyword">as</span> b</span><br><span class="line"><span class="keyword">where</span> a.categoryid = b.pid</span><br></pre></td></tr></table></figure>





<h2 id="分页和排序"><a href="#分页和排序" class="headerlink" title="分页和排序"></a>分页和排序</h2><p>排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 分页limit和排序order by</span></span><br><span class="line"><span class="comment">-- order by通过哪个字段排序，怎么排</span></span><br><span class="line"><span class="comment">-- 升序asc 降序 desc</span></span><br><span class="line"><span class="keyword">select</span> s.studentno,studentname,subjectname,studentresult</span><br><span class="line"><span class="keyword">from</span> student s</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">on</span> r.studentno=s.studentno</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> subject sub</span><br><span class="line"><span class="keyword">on</span> r.subjectno=sub.subjectno</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> studentresult <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>

<p>分页</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 为什么要分页？</span></span><br><span class="line"><span class="comment">-- 缓解数据库压力 给人的体验更好 一般图片会用瀑布流</span></span><br><span class="line"><span class="comment">-- 分页 每页只显示两条数据</span></span><br><span class="line"><span class="comment">-- 语法 limit 起始值 页面的大小</span></span><br><span class="line"><span class="comment">-- 网页应用:当前，总的页数，页面的大小</span></span><br><span class="line"><span class="comment">-- limit 0,5 1-5  第一页</span></span><br><span class="line"><span class="comment">-- limit 1,5 2-6</span></span><br><span class="line"><span class="comment">-- limit 5,5      第二页</span></span><br><span class="line"><span class="keyword">select</span> s.studentno,studentname,subjectname,studentresult</span><br><span class="line"><span class="keyword">from</span> student s</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">on</span> r.studentno=s.studentno</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> subject sub</span><br><span class="line"><span class="keyword">on</span> r.subjectno=sub.subjectno</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> studentresult <span class="keyword">desc</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">1</span>,<span class="number">2</span></span><br></pre></td></tr></table></figure>





<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>where(这个值是计算出来的)</p>
<p>本质:<code>在where语句中嵌套一个子查询语句</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- where</span></span><br><span class="line"><span class="comment">-- 查询高等数学-1的所有考试结果</span></span><br><span class="line"><span class="comment">-- 方式一 使用连表查询 降序排列</span></span><br><span class="line"><span class="keyword">select</span> s.subjectno,subjectname,studentresult</span><br><span class="line"><span class="keyword">from</span> subject s</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">on</span> s.subjectno=r.subjectno</span><br><span class="line"><span class="keyword">where</span> subjectname=<span class="string">&#x27;高等数学-1&#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> studentresult <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二 使用子查询(由里及外)</span></span><br><span class="line"><span class="keyword">select</span> subjectno,studentresult</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">where</span> subjectno=(</span><br><span class="line"><span class="keyword">select</span> subjectno <span class="keyword">from</span> <span class="string">`subject`</span></span><br><span class="line"><span class="keyword">where</span> subjectname=<span class="string">&#x27;高等数学-1&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h2 id="分组和过滤（group-by…having）"><a href="#分组和过滤（group-by…having）" class="headerlink" title="分组和过滤（group by…having）"></a>分组和过滤（group by…having）</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询不同课程的平均分、最高分、最低分、平均分大于80</span></span><br><span class="line"><span class="keyword">select</span> subjectname,<span class="keyword">avg</span>(studentresult) <span class="keyword">as</span><span class="string">&#x27;平均分&#x27;</span>,<span class="keyword">max</span>(studentresult) <span class="keyword">as</span><span class="string">&#x27;最高分&#x27;</span>,<span class="keyword">min</span>(studentresult) <span class="keyword">as</span><span class="string">&#x27;最低分&#x27;</span></span><br><span class="line"><span class="keyword">from</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> <span class="string">`subject`</span> s</span><br><span class="line"><span class="keyword">on</span> r.subjectno=s.subjectno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> r.subjectno <span class="comment">-- 通过什么字段来分组</span></span><br><span class="line"><span class="keyword">HAVING</span> 平均分&gt;<span class="number">80</span></span><br></pre></td></tr></table></figure>







<h1 id="MySQL函数"><a href="#MySQL函数" class="headerlink" title="MySQL函数"></a>MySQL函数</h1><h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 常用函数</span></span><br><span class="line"><span class="comment">-- 数学运算</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">abs</span>(<span class="number">-8</span>) <span class="comment">-- 绝对值</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">CEILING</span>(<span class="number">9.4</span>) <span class="comment">-- 向上取整</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">FLOOR</span>(<span class="number">9.4</span>)  <span class="comment">-- 向下取整</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rand</span>()  <span class="comment">-- 返回0-1之间的随机数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sign</span>(<span class="number">-10</span>) <span class="comment">-- 判断一个数的符号 负数返回-1 正数返回1</span></span><br><span class="line"><span class="comment">-- 字符串函数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">char_length</span>(<span class="string">&#x27;dasdasdas&#x27;</span>) <span class="comment">-- 字符串长度</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(<span class="string">&#x27;我&#x27;</span>,<span class="string">&#x27;艾&#x27;</span>)  <span class="comment">-- 拼接字符串</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">LOWER</span>(<span class="string">&#x27;Jonyon&#x27;</span>) <span class="comment">-- 全部转小写</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">UPPER</span>(<span class="string">&#x27;Jonyon&#x27;</span>) <span class="comment">-- 全部转大写</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">INSTR</span>(<span class="string">&#x27;jonyon&#x27;</span>,<span class="string">&#x27;n&#x27;</span>) <span class="comment">-- 返回第一次出现的子串的位置</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">REPLACE</span>(<span class="string">&#x27;坚持就是胜利&#x27;</span>,<span class="string">&#x27;就是&#x27;</span>,<span class="string">&#x27;也不一定是&#x27;</span>) <span class="comment">-- 替换出现的指定字符串</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">SUBSTR</span>(<span class="string">&#x27;坚持就是胜利&#x27;</span>,<span class="number">5</span>,<span class="number">2</span>) <span class="comment">-- 返回指定字符串(原字符串，截取的位置，截取的长度)</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">REVERSE</span>(<span class="string">&#x27;坚持就是胜利&#x27;</span>) <span class="comment">-- 反转字符串</span></span><br><span class="line"><span class="comment">-- 时间和日期函数(记住)</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">CURRENT_DATE</span> <span class="comment">-- 获取当前日期</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOW</span>() <span class="comment">-- 获取当前日期</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">LOCALTIME</span>() <span class="comment">-- 本地时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>() <span class="comment">-- 系统时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>()  <span class="comment">-- 系统</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">VERSION</span>()</span><br></pre></td></tr></table></figure>



<h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><table>
<thead>
<tr>
<th>函数名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>count()</td>
<td>计数</td>
</tr>
<tr>
<td>sum()</td>
<td>求和</td>
</tr>
<tr>
<td>avg()</td>
<td>平均值</td>
</tr>
<tr>
<td>max()</td>
<td>最大值</td>
</tr>
<tr>
<td>min()</td>
<td>最小值</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 聚合函数</span></span><br><span class="line"><span class="comment">-- 都能够统计表中的数据(想查询一个表中有多少记录)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(studentname) <span class="keyword">from</span> student <span class="comment">-- count(字段)，会忽略所有的null值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">from</span> student <span class="comment">-- count(*)不会忽略null值 本质:计算行数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="number">1</span>) <span class="keyword">from</span> student <span class="comment">-- count(1)不会忽略null值 本质:计算行数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sum</span>(studentresult) <span class="keyword">as</span><span class="string">&#x27;总分&#x27;</span> <span class="keyword">from</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">avg</span>(studentresult) <span class="keyword">as</span><span class="string">&#x27;平均分&#x27;</span> <span class="keyword">from</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">max</span>(studentresult) <span class="keyword">as</span><span class="string">&#x27;最高分&#x27;</span> <span class="keyword">from</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">min</span>(studentresult) <span class="keyword">as</span><span class="string">&#x27;最低分&#x27;</span> <span class="keyword">from</span> <span class="keyword">result</span></span><br></pre></td></tr></table></figure>





<h1 id="数据库级别的MD5加密"><a href="#数据库级别的MD5加密" class="headerlink" title="数据库级别的MD5加密"></a>数据库级别的MD5加密</h1><p>什么是MD5？</p>
<p>MD5不可逆，具体的值的MD5是一样的，比如说123456</p>
<p>MD5破解网站的原理，背后有一个字典，MD5加密后的值，加密后的值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 测试MD5加密</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> testmd5(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">pwd <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>)</span><br><span class="line"></span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">innodb</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 明文密码</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> testmd5 <span class="keyword">values</span>(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;zhangsan&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;lisi&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;wangwu&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 加密</span></span><br><span class="line"><span class="keyword">update</span> testmd5 <span class="keyword">set</span> pwd=<span class="keyword">MD5</span>(pwd) <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">2</span> <span class="comment">-- 加密了</span></span><br><span class="line"><span class="keyword">update</span> testmd5 <span class="keyword">set</span> pwd=<span class="keyword">MD5</span>(pwd) <span class="comment">-- 加密了全部的密码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入的时候加密</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">into</span> testmd5 <span class="keyword">values</span>(<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;xiaohong&#x27;</span>,<span class="keyword">MD5</span>(<span class="string">&#x27;123456&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 如何校验，将用户传递进来的代码，进行MD5加密，然后比对加密后的值</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">from</span> testmd5 <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">&#x27;wangwu&#x27;</span> <span class="keyword">and</span> pwd=<span class="keyword">MD5</span>(<span class="string">&#x27;123456&#x27;</span>)</span><br></pre></td></tr></table></figure>





<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><h2 id="什么是事务"><a href="#什么是事务" class="headerlink" title="什么是事务"></a>什么是事务</h2><p><code>要么都成功、要么都失败</code></p>
<p>将一组SQL放在一个批次中执行</p>
<h2 id="事务原则-ACID原则"><a href="#事务原则-ACID原则" class="headerlink" title="事务原则:ACID原则"></a>事务原则:ACID原则</h2><p><strong>原子性（Atomicity）</strong><br>原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。</p>
<p>针对同一个事务</p>
<p><img src="/2020/12/29/MySQL/image-20201229115051120.png" alt="image-20201229115051120"></p>
<p>这个过程包含两个步骤</p>
<p>A： 800 - 200 = 600<br>B: 200 + 200 = 400</p>
<p>原子性表示，这两个步骤一起成功，或者一起失败，不能只发生其中一个动作</p>
<p><strong>一致性（Consistency）</strong><br>事务前后数据的完整性必须保持一致。</p>
<p>针对一个事务操作前与操作后操作一致</p>
<p><img src="/2020/12/29/MySQL/image-20201229115228329.png" alt="image-20201229115228329"></p>
<p>操作前A：800，B：200<br>操作后A：600，B：400</p>
<p>一致性表示事务完成后，符合逻辑运算</p>
<p><strong>隔离性（Isolation）</strong><br>事务的隔离性是多个用户并发访问数据库时，数据库为每一个用户开启的事务，不能被其他事务的操作数据所干扰，多个并发事务之间要相互隔离。</p>
<p>表示事务结束后的数据不随外界原因导致数据丢失</p>
<p>操作前A：800，B：200<br>操作后A：600，B：400<br>如果在操作前（事务还没有提交）服务器宕机或者断电，那么重启数据库以后，数据状态应该为<br>A：800，B：200<br>如果在操作后（事务已经提交）服务器宕机或者断电，那么重启数据库以后，数据状态应该为<br>A：600，B：400</p>
<p><strong>持久性（Durability）</strong><br>持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来即使数据库发生故障也不应该对其有任何影响</p>
<p>针对多个用户同时操作，主要是排除其他事务对本次事务的影响</p>
<p><img src="/2020/12/29/MySQL/image-20201229115452418.png" alt="image-20201229115452418"></p>
<h2 id="隔离性（Isolation）所导致的一些问题"><a href="#隔离性（Isolation）所导致的一些问题" class="headerlink" title="隔离性（Isolation）所导致的一些问题"></a><strong>隔离性（Isolation）</strong>所导致的一些问题</h2><p><strong>脏读：</strong></p>
<p>指一个事务读取了另一个事务未提交的数据</p>
<p><img src="/2020/12/29/MySQL/image-20201229115943793.png" alt="image-20201229115943793"></p>
<p><strong>不可重复读</strong></p>
<p>在一个事务内读取表中的某一行数据，多次读取结果不同（这个不一定是错误，只是某些场合不对）</p>
<p><img src="/2020/12/29/MySQL/image-20201229120104184.png" alt="image-20201229120104184"></p>
<p><strong>虚读（幻读）</strong></p>
<p>是指在一个事务内读取到了别的事务插入的数据，导致前后读取不一致。（一般是行影响，多了一行）</p>
<p><img src="/2020/12/29/MySQL/image-20201229120155673.png" alt="image-20201229120155673"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- mysql自动开启事务自动提交</span></span><br><span class="line"><span class="keyword">set</span> autocommit=<span class="number">0</span> <span class="comment">-- 关闭事务</span></span><br><span class="line"><span class="keyword">set</span> autocommit=<span class="number">1</span> <span class="comment">-- 开启事务（默认）</span></span><br><span class="line"><span class="comment">-- 手动处理事务</span></span><br><span class="line"><span class="comment">-- 事务开启 </span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">TRANSACTION</span> <span class="comment">-- 标记一个事务的开始，从这个之后的sql都在同一个事务内</span></span><br><span class="line"><span class="comment">-- 提交 持久化 commit</span></span><br><span class="line"><span class="keyword">commit</span></span><br><span class="line"><span class="comment">-- 回滚 回到原来的样子 rollback</span></span><br><span class="line"><span class="keyword">rollback</span></span><br><span class="line"><span class="comment">-- 事务结束</span></span><br><span class="line"><span class="keyword">savepoint</span> 保存点名 <span class="comment">-- 设置一个事务的保存点</span></span><br><span class="line"><span class="keyword">rollback</span> <span class="keyword">to</span> <span class="keyword">savepoint</span> 保存点名 <span class="comment">-- 回滚到保存点</span></span><br><span class="line"><span class="keyword">RELEASE</span> <span class="keyword">savepoint</span> 保存点名<span class="comment">-- 撤销保存点</span></span><br></pre></td></tr></table></figure>





<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><blockquote>
<p>MySQL官方对索引的定义为：<strong>索引（Index）是帮助MySQL高效获取数据的数据结构。</strong></p>
<p>提取句子主干，就可以得到索引的本质：索引是数据结构。</p>
<p>索引在小数据量的时候用处不大，但在大数据量的时候区别十分明显</p>
</blockquote>
<h2 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h2><blockquote>
<p>在一个表中，主键索引只能有一个，唯一索引可以有多个</p>
</blockquote>
<ul>
<li>主键索引（primary key）<ul>
<li>唯一标识，主键不可重复，只能有一个列作为主键</li>
</ul>
</li>
<li>唯一索引（unique key）<ul>
<li>避免重复的列出现，唯一索引可以重复，多个列都可以标识为索引</li>
</ul>
</li>
<li>常规索引（key/index）<ul>
<li>默认的，index，key关键字来设置</li>
</ul>
</li>
<li>全文索引（fulltext）<ul>
<li>快速定位数据</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 索引的使用</span></span><br><span class="line"><span class="comment">-- 1.在创建表的时候给字段增加索引</span></span><br><span class="line"><span class="comment">-- 2.创建完毕后，增加索引</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显示所有的索引信息</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> student</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增加全文索引</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> school.student <span class="keyword">add</span> FULLTEXT <span class="keyword">INDEX</span> studentname(studentname)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- EXPLAIN 分析sql执行的状况</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> student;  <span class="comment">-- 非全文索引</span></span><br></pre></td></tr></table></figure>





<h2 id="测试索引"><a href="#测试索引" class="headerlink" title="测试索引"></a>测试索引</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`app_user`</span> (</span><br><span class="line"><span class="string">`id`</span> <span class="built_in">BIGINT</span>(<span class="number">20</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line"><span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span><span class="string">&#x27;&#x27;</span> <span class="keyword">COMMENT</span><span class="string">&#x27;用户昵称&#x27;</span>,</span><br><span class="line"><span class="string">`email`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span><span class="string">&#x27;用户邮箱&#x27;</span>,</span><br><span class="line"><span class="string">`phone`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span><span class="string">&#x27;&#x27;</span> <span class="keyword">COMMENT</span><span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line"><span class="string">`gender`</span> <span class="built_in">TINYINT</span>(<span class="number">4</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span><span class="keyword">COMMENT</span> <span class="string">&#x27;性别（0：男;1:女）&#x27;</span>,</span><br><span class="line"><span class="string">`password`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line"><span class="string">`age`</span> <span class="built_in">TINYINT</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span><span class="string">&#x27;0&#x27;</span>  <span class="keyword">COMMENT</span> <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line"><span class="string">`create_time`</span>  datetime <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line"><span class="string">`update_time`</span> <span class="built_in">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COMMENT</span> = <span class="string">&#x27;app用户表&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入100万数据.</span></span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="comment">-- 写函数之前必须要写，标志</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> mock_data ()</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="built_in">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> <span class="keyword">num</span> <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1000000</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	WHILE i&lt;num DO</span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`app_user`</span>(<span class="string">`name`</span>,<span class="string">`email`</span>,<span class="string">`phone`</span>,<span class="string">`gender`</span>)<span class="keyword">VALUES</span>(<span class="keyword">CONCAT</span>(<span class="string">&#x27;用户&#x27;</span>,i),<span class="string">&#x27;19224305@qq.com&#x27;</span>,<span class="string">&#x27;123456789&#x27;</span>,<span class="keyword">FLOOR</span>(<span class="keyword">RAND</span>()*<span class="number">2</span>));</span><br><span class="line">		<span class="keyword">SET</span> i=i+<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">WHILE</span>;</span><br><span class="line">	RETURN i;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> mock_data() <span class="comment">-- 执行此函数 生成一百万条数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">from</span> app_user <span class="keyword">where</span> <span class="keyword">name</span> =<span class="string">&#x27;用户1000&#x27;</span></span><br><span class="line"><span class="comment">-- 创建索引之前&gt; 时间: 0.525s</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">from</span> app_user <span class="keyword">where</span> <span class="keyword">name</span> =<span class="string">&#x27;用户1000&#x27;</span></span><br><span class="line"><span class="comment">-- rows=994560 查了994560条数据</span></span><br><span class="line"><span class="comment">-- id _ 表名 _ 字段名</span></span><br><span class="line"><span class="comment">-- create index 索引名 on 表 (字段)</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> id_app_user_name <span class="keyword">on</span> app_user(<span class="keyword">name</span>);</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">from</span> app_user <span class="keyword">where</span> <span class="keyword">name</span> =<span class="string">&#x27;用户1000&#x27;</span></span><br><span class="line"><span class="comment">-- 创建索引之后&gt; 时间: 0.045s</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">from</span> app_user <span class="keyword">where</span> <span class="keyword">name</span> =<span class="string">&#x27;用户1000&#x27;</span></span><br><span class="line"><span class="comment">-- rows=1 查了1条数据</span></span><br></pre></td></tr></table></figure>





<h2 id="索引原则"><a href="#索引原则" class="headerlink" title="索引原则"></a>索引原则</h2><ul>
<li>索引不是越多越好</li>
<li>不要对经常变动的数据加索引</li>
<li>小数据量的表不需要加索引</li>
<li>索引一般加在常用来查询的字段上</li>
</ul>
<p>索引的数据结构</p>
<p>Btree：innodb默认的数据结构</p>
<h1 id="权限管理和备份"><a href="#权限管理和备份" class="headerlink" title="权限管理和备份"></a>权限管理和备份</h1><h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><p><strong>sql命令</strong></p>
<p>用户表：mysql.user</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建用户 create user 用户名 IDENTIFIED by &#x27;密码&#x27;</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> jonyon <span class="keyword">IDENTIFIED</span> <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span></span><br><span class="line"><span class="comment">-- 修改密码(修改当前用户密码)</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">password</span>=<span class="keyword">password</span>(<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"><span class="comment">-- 修改密码(修改指定用户密码)</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">password</span> <span class="keyword">for</span> jonyon=<span class="keyword">password</span>(<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"><span class="comment">-- 重命名</span></span><br><span class="line"><span class="keyword">RENAME</span> <span class="keyword">user</span> jonyon <span class="keyword">to</span> wzj</span><br><span class="line"><span class="comment">-- 用户授权all PRIVILEGES 全部的权限 除了给别人授权，别的都能干</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">all</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> wzj </span><br><span class="line"><span class="comment">-- 查询权限</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">GRANT</span> <span class="keyword">for</span> wzj <span class="comment">-- 查看指定用户的权限</span></span><br></pre></td></tr></table></figure>



<h1 id="MySQL数据库备份"><a href="#MySQL数据库备份" class="headerlink" title="MySQL数据库备份"></a>MySQL数据库备份</h1><ul>
<li>保证重要的数据不丢失</li>
<li>数据转移 A—&gt;B</li>
</ul>
<p>MySQL数据库备份的方式</p>
<ul>
<li>直接拷贝物理文件</li>
<li>在可视化工具中手动导出</li>
<li>使用命令行导出  mysqkdump 命令行使用</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#mysqldump -h 主机 -u 用户名 -p 密码 数据库 表名 &gt; 物理磁盘位置/文件名</span></span><br><span class="line">mysqldump -hlocalhost -uroot -p123456 school student &gt;D:/a.sql</span><br><span class="line"><span class="comment">#mysqldump -h 主机 -u 用户名 -p 密码 数据库 表名1 表名2 表名3 &gt; 物理磁盘位置/文件名</span></span><br><span class="line"><span class="comment">#mysqldump -h 主机 -u 用户名 -p 密码 数据库&gt; 物理磁盘位置/文件名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#导入</span></span><br><span class="line"><span class="comment">#登录的情况下，切换到指定数据库</span></span><br><span class="line"><span class="comment">#source 备份文件</span></span><br><span class="line"><span class="built_in">source</span> D:/a.sql</span><br><span class="line">mysql -u用户名 -p密码 库名&lt;备份文件</span><br></pre></td></tr></table></figure>



<h1 id="规范数据库设计"><a href="#规范数据库设计" class="headerlink" title="规范数据库设计"></a>规范数据库设计</h1><h2 id="为什么需要设计"><a href="#为什么需要设计" class="headerlink" title="为什么需要设计"></a>为什么需要设计</h2><p>当数据库比较复杂的时候就需要设计了</p>
<p><strong>糟糕的数据库设计</strong></p>
<ul>
<li>数据冗余，浪费空间</li>
<li>数据库插入和删除都会很麻烦、异常【屏蔽使用物理外键】</li>
<li>程序性能差</li>
</ul>
<p><strong>良好的数据库设计</strong></p>
<ul>
<li>节省内存空间</li>
<li>保证数据库的完整性</li>
<li>方便我们开发系统</li>
</ul>
<p><strong>软件开发中，关于数据库的设计</strong></p>
<ul>
<li>需求分析：分析业务和需要处理的数据库的需求</li>
<li>概念设计：设计关系图E-R图</li>
</ul>
<h2 id="三大范式"><a href="#三大范式" class="headerlink" title="三大范式"></a>三大范式</h2><p>为什么需要数据规范化</p>
<ul>
<li>信息重复</li>
<li>更新异常</li>
<li>插入异常<ul>
<li>无法正常显示信息</li>
</ul>
</li>
<li>删除异常<ul>
<li>丢失有效信息</li>
</ul>
</li>
</ul>
<p><strong>第一范式（1NF）</strong></p>
<p>原子性：保证每一列不可再分</p>
<p><img src="/2020/12/29/MySQL/image-20201229153000652.png" alt="image-20201229153000652"></p>
<p><strong>第二范式（2NF）</strong></p>
<p>前提：满足第一范式</p>
<p>每张表只描述一件事情</p>
<p><img src="/2020/12/29/MySQL/image-20201229153025902.png" alt="image-20201229153025902"></p>
<p><strong>第三范式（3NF）</strong></p>
<p>前提：满足第一二范式</p>
<p><strong>第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。</strong></p>
<p><img src="/2020/12/29/MySQL/image-20201229153051165.png" alt="image-20201229153051165"></p>
<p>（规范数据库设计）</p>
<p><strong>规范性和性能的问题</strong></p>
<p>阿里规定关联查询的表不得超过三张表</p>
<ul>
<li>考虑商业化的需求和目标，数据库的性能更重要</li>
<li>在规范性能的问题的时候，需要适当考虑 规范性</li>
<li>故意给某些表增加一些冗余字段（从多表查询变为单表查询）</li>
<li>故意增加一些计算列（从大数据量降低为小数据量的查询：索引）</li>
</ul>
<h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><h2 id="数据库驱动"><a href="#数据库驱动" class="headerlink" title="数据库驱动"></a>数据库驱动</h2><p>驱动：声卡、显卡、数据库</p>
<p><img src="/2020/12/29/MySQL/image-20201229153410785.png" alt="image-20201229153410785"></p>
<p>我们的程序会通过数据库驱动和数据库打交道</p>
<h2 id="JDBC-1"><a href="#JDBC-1" class="headerlink" title="JDBC"></a>JDBC</h2><p>SUN公司为了简化开发人员对数据库的统一操作，提供了一个规范（java操作数据库的）JDBC</p>
<p>这些规范的实现由具体的厂商去做</p>
<p>对于开发人员来说，只需要掌握JDBC接口的操作即可</p>
<p><img src="/2020/12/29/MySQL/image-20201229153751973.png" alt="image-20201229153751973"></p>
<p><strong>在架构中，没有什么是加一层解决不了的</strong></p>
<p>java.sql</p>
<p>javax.sql</p>
<p>数据库驱动：mysql-connector-java-5.1.47</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
        <a target="_blank" class="social-link" href="https://twitter.com/username">
          <span class="icon">
            <i class="fab fa-twitter"></i>
          </span>

          <span class="label">Twitter</span>
        </a>
      </div>

      <div class="social-item">
        <a target="_blank" class="social-link" href="https://t.me/channel_name">
          <span class="icon">
            <i class="fab fa-telegram"></i>
          </span>

          <span class="label">Telegram</span>
        </a>
      </div>

      <div class="social-item">
        <a target="_blank" class="social-link" href="/images/wechat_channel.jpg">
          <span class="icon">
            <i class="fab fa-weixin"></i>
          </span>

          <span class="label">WeChat</span>
        </a>
      </div>

      <div class="social-item">
        <a target="_blank" class="social-link" href="/atom.xml">
          <span class="icon">
            <i class="fa fa-rss"></i>
          </span>

          <span class="label">RSS</span>
        </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/SQL/" rel="tag"># SQL</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/12/12/%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7/" rel="prev" title="容器数据卷">
                  <i class="fa fa-chevron-left"></i> 容器数据卷
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/02/10/redis/" rel="next" title="redis">
                  redis <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2020 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">吴政杰</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("12/05/2020 17:38:00");//在此处修改你的建站时间，格式：月/日/年 时:分:秒
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
    } 
setInterval("createtime()",250);
</script>



    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>

<script src="/js/local-search.js"></script>






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






</body>
</html>
